# 卒業研究論文

# 一章
## 研究の目的
ソフトウェアには保守作業は、ソフトウェアライフサイクルのコストのうちおよそ70％を閉めることがわかっている。
<!--TODO: software defect reduction top 10 list-->
それゆえ、ソフトウェアの保守性を保つためにソースコードの品質が重要となる。
ソースコードの品質にはさまざまな指標が存在するが、その中に「可読性」という指標が存在する。
可読性は、人間がソースコードを読む際の読みやすさのことである。
ソフトウェアの保守作業のうち、多くの時間がソースコードの読解に使われていることがわかっている。
  <!--FIXME: なんらかのデータを持ってくる-->
そして、その可読性がソフトウェアの品質に影響を与えることがわかっている。
  <!--TODO: Relating Identifier Naming Flaws and Code Quality: an empirical study-->
それゆえ、ソースコードの可読性はソフトウェアの保守性を保つために重要な指標であると考えられる。

ソースコードの可読性に影響を与える要素はいくつか存在する。
〇〇の研究ではソースコード中のコメントは可読性の向上に貢献することを明らかにした。
  <!--FIXME: コメントと可読性の研究を持ってくる-->
また、〇〇の研究では適切な改行によって、ソースコードの可読性が向上することを明らかにした。
  <!--FIXME: 改行と可読性の研究を持ってくる-->
Johannes, Janet, Danielは、識別子名に単語を使用した場合、略語や文字を使用した場合に比べてソースコードの理解速度が有意に速くなることを明らかにした。
  <!--TODO: shorter identifier names take longer to comprehend-->
ソースコードは、その大半が識別子によって構成されている。
Florian, PizkaはEclipse(version 3.1.1)のソースコードを分析し、識別子トークンの数が全トークンに対して33%を占めており、 文字数では全文字数に対し識別子トークンの文字数が72%を占めていることを明らかにした。
  <!--TODO: Concise and consistent naming∗-->
よって、可読性を意識した識別子の命名によって、 ソースコードの可読性を大きく向上させることが期待できる。
識別子によるソースコードの可読性の向上には、さまざまなアプローチが存在する。
<!--FIXME: いくつかの例を出す-->
その中に、品詞によるアプローチがある。
このアプローチは関数名は動詞・動詞句、変数名は名詞・名詞句にするといったように、識別子が指す対象によって識別子名が特定の品詞・品詞句になるように、識別子を命名するアプローチはである。
以後、ソースコードの可読性を向上させるため、識別子が指す対象によって識別子名が特定の品詞・品詞句になるように、識別子を命名するアプローチを「品詞によるアプローチ」と呼ぶこととする。
プログラミング言語のコミュニティが定めるガイドラインや、企業やソフトウェア開発プロジェクトが定めるコーディングスタイルガイドでも、品詞によるアプローチを確認することができる。
<!--FIXME: 品詞によるアプローチの例をいくつか-->
これより、品詞によるアプローチはソフトウェア開発者にとって、一般的なアプローチであると考えられる。

<!--FIXME: うまく言語化する-->
人間は自然言語を理解することができる。そんな人間がソースコードを読むのであれば自然言語のルールに沿う命名がよみやすいはず。
(他言語を学習する際、元の言語とのマッピングみたいな行為を無意識に行なっている可能性)
自然言語には品詞の並び順にルールがある。
識別子の命名にも品詞によるアプローチが存在する。
可読性の高い識別子＝自然言語にちかい識別子であるかもしれない。
この瀕死の並び順のルールがプログラム中の識別子にもないか調査をする。
そして、モデルを構築できたらいいな。
<!------------------------>
本論文ではJavaを取り扱う。

## Javaプログラムの構文紹介
### 識別子
識別子とは「プログラム言語における変数名や関数名を表す名前」である。
<!--TODO: -CS百科事典からの引用-->
Javaのプログラムは以下の3つの最小単位によって構成される。
<!--[javaの構文／TOKENとか]から引用-->
- Token
- Comment
- White Space

そして、Tokenは以下の4つに分類することができる。
<!--[javaの構文／TOKENとか]から引用-->

| category   | description                               |
| ---------- | ----------------------------------------- |
| Identifier | 識別子                                       |
| Keyword    | ASCII文字から成る50種類の予約後                       |
| Separator  | 区切り文字<br>```( ) { } [ ] ; , . ... @ ::``` |
| Operator   | ASCII文字から成る38種類の演算子                       |

これより、javaにおける識別子はプログラムの最小単位で、変数や関数を表す名前であると言える。
javaでは識別子が表す対象により、以下のように識別子を分類することができる。
<!--FIXME: この分類ちょいとあやしい。根拠を示す--> - クラス名 - メソッド名 - インターフェース名 - 変数名
- パッケージ名

識別子名はプログラムの実行結果に影響を及ぼさない。
そして、プログラムの書き手は識別子に自由に名前をつけることができる。
しかし、識別子の名前にはいくつかの制限が存在する。
以下はJavaにおける識別子名に関する制限である。
```
Identifier:
IdentifierChars but not a Keyword or BooleanLiteral or NullLiteral
IdentifierChars:
JavaLetter {JavaLetterOrDigit}
JavaLetter:
any Unicode character that is a "Java letter"
JavaLetterOrDigit:
any Unicode character that is a "Java letter-or-digit"
```
<!--[javaの構文／TOKENとか]から引用-->

これより、Javaの識別子名には以下の文字が使用可能であることがわかる。
```
a b c d e f g h i j k l m n o p q r s t u v w x y z
A B C D E F G H I J K L M N O P Q R S T U V W X Y Z
0 1 2 3 4 5 6 7 8 9 _ $
```
つまり、javaでは、全てのアルファベットを識別子名に使用可能である。
全てのアルファベットを識別子名に使用可能であることから、プログラムの書き手はある程度自由に識別子名を決定することができると言える。
本論文ではプログラムの書き手のことを「プログラマ」、プログラマが識別子名を決定する行為を「命名」と定義する。

識別子名は制限を満たせばあらゆる文字列を使用可能である。
識別子名にはしばしば単語や略語が用いられることがある。
また、複数の単語の組み合わせによる識別子の命名がされることもある。
javaにおいて、複数の単語を組み合わせる際は、以下に挙げる記法によって単語が組み合わされる。

| form             | description                              |
| ---------------- | ---------------------------------------- |
| UpperCamelCase   | 単語の先頭を大文字とし、単語を連結する                      |
| LowerCamelCase   | 先頭単語の先頭の文字を小文字とし、以降は単語の先頭を大文字として、単語を連結する |
| UPPER_SNAKE_CASE | 全ての単語を大文字として、アンダースコアで単語を連結する             |
| lower_snake_case | 全ての単語を小文字として、アンダースコアで単語を連結する             |

Javaでは識別子が指す対象によって、推奨される記法が存在する。

| identifier category | form             |
| ------------------- | ---------------- |
| クラス名                | UpperCamelCase   |
| 型パラメータ名             | 一文字の大文字          |
| メソッド名               | lowerCamelCase   |
| フィールド名(変数名)         | lowerCamelCase   |
| 定数名（変数名)            | UPPER_SNAKE_CASE |
| ローカル変数名(変数名)        | 小文字による短い単語       |

### クラス
### メソッド
### 変数
#### フィールド変数
#### 定数
#### ローカル変数

## 識別子の命名の重要性
識別子の命名は重要である。

## 識別子の命名と品詞
ソフトウェア開発者の間で、プログラムの可読性は重要であると、広く認識されている。
このことはエンタープライズ分野のソフトウェア開発において「コーディグ規約」というものが導入されることから読み取ることができる。
コーディング規約とは、「ソフトウェア開発において、企業やオープンソースコミュニティやあるいは特定のプロダクトごとに定められた、プログラムのコーディングに当たっての統一的なガイドラインのことである。」<!--weblioから引っ張ってきたやつ-->
コーディング規約はプログラムのさまざまな部分に対して規約を定めており、しばしば識別子の命名に関する規約が定められることある。
Google社が採用、公開している「Google Java Coding Style Guide」というjavaのコーディング規約ではクラス名は名詞・名詞句、メソッド名は動詞・動詞句、のように識別子の命名と品詞を関連づけている。
このように品詞と識別子の命名を関連づけているコーディング規約は他にも存在する。<!--コーディング規約いくつか引用-->
これより、識別子の命名と品詞はなんらかの関連性を持っていることが考えられる。

## 識別子の命名に関する暗黙知
これより、命名に関する暗黙知の存在が考えられる。

## 仮説
# 二章
## 研究・調査の手法

1. javaのossをjavaparserを使ってast解析し、識別子を抽出する
2. 1で抽出した識別子を単語ごとに分解する
3. 2で分解した単語がどの品詞になるのかを判定する
4. 3で得られた結果をもとに統計的手法を用いて相関を求める
5. 4の分析結果から命名の手法を提案する

### javaについて
- オブジェクト指向言語、静的型付け言語
- 1995年にsun microsystemsにより初めてリリースされたプログラミング言語
- 歴史が長い<!-- tood: evidence -->
- エコシステムが充実している
  - 複数のideの存在
  (eclipse, intellij, netbeans)
  - ossリポジトリの数
  (2020-10月時点で1,622,484のリポジトリが存在[^5])

### ossについて
oss: オープンソースソフトウェア(open source software)

- 無償で公開されているソフトウェア
- 利用、改変、再配布が自由
- 様々な人がメンテナンスをしている
  (facebook/reactでは1500人を超える[^6])
  - 可読性の高さが期待される

oss=暗黙知の集積場

### astによるソースコード解析
ast: (abstract syntax tree)抽象構文木
- 中間表現のひとつ<!-- todo: evidence -->
  (プログラミング言語 → 中間言語 →アセンブリ言語)
- プログラムをツリー構造で保持<!-- todo: evidence -->
- ソースコードの情報を得るために有効<!-- todo: evidence -->

### javaparserの採用について
ast解析ツールの選択肢は主に以下二つ

- jdt
- javaparser

javaparserは

- ドキュメントが充実している[^7]
- eclipseに依存していない

# 三章
## 分析・考察
# 四章
## 命名手法の提案

# 参考
- [javaの識別子に使用できる文字](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/variables.html) 2020/12/19 2:18閲覧
- [javaの構文／TOKENとか](https://docs.oracle.com/javase/specs/jls/se8/html/jls-3.html#jls-Identifier) 2020/12/20 12:01閲覧
- [Google java coding style guide](https://google.github.io/styleguide/javaguide.html#s5.1-identifier-names) 2020/12/20 12:58閲覧
- [コーディング規約の例](http://objectclub.jp/community/codingstandard/CodingStd.pdf) 2020/12/20 18:47閲覧